<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <title>Perfil de Usuario</title>
</head>
<body>
    <header>
        <h1>TEC DIGITALITO</h1>
    </header>

    <div class="contenedor-usuario">
        
        <div class="informacion-usuario">
            <h2>Información del Usuario</h2>

            <!-- Aquí se mostrará la información del usuario cargada desde MongoDB -->
            <p><strong>Nombre de Usuario:</strong> <span id="usuario"></span></p>
            <p><strong>Nombre:</strong> <span id="nombre"></span></p>
            <p><strong>Fecha de Nacimiento:</strong> <span id="fecha-nacimiento"></span></p>
            <p><strong>Imagen:</strong> <span id="imagen"></span></p>
        </div>

        <div class="botones-abajo"> <!-- Contenedor para botones debajo del div -->
            <button class="hacer-amigo">Hacer Amigo</button>
            <button class="enviar-mensaje">Enviar Mensaje</button>
        </div>
    </div>

    <!-- Botón de Volver -->
    <div class="boton-volver">
        <button onclick="volverPantalla()">Volver</button>
    </div>

    <script>
        function volverPantalla() {
            window.location.href = 'listaUsuarios.html';
        }
    
        // Función para cargar la información del usuario desde MongoDB
        async function cargarInformacionUsuario() {
            try {
                const usuario = obtenerParametroURL('usuario');
                console.log(usuario)
                const response = await fetch(`/obtenerInformacionUsuarioSeleccionado?usuario=${usuario}`);
                
                if (response.ok) {
                    const usuarioInfo = await response.json();
                    console.log('Información del usuario:', usuarioInfo);
                    
                    // Llena los elementos HTML con la información del usuario
                    document.getElementById('usuario').textContent = usuarioInfo.usuario;
                    document.getElementById('imagen').textContent = usuarioInfo.imagen;
                    document.getElementById('nombre').textContent = usuarioInfo.nombre;
                    document.getElementById('fecha-nacimiento').textContent = usuarioInfo.fecha_nacimiento;
                } else {
                    console.error('Error al obtener la información del usuario:', response.status);
                }
            } catch (error) {
                console.error('Error al obtener la información del usuario:', error);
            }
        }
    
        // Función para obtener parámetros de la URL
        function obtenerParametroURL(nombre) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(nombre);
        }
    
        // Llama a la función para cargar la información del usuario cuando la página se carga
        window.onload = cargarInformacionUsuario;
    </script>
</body>
</html>
